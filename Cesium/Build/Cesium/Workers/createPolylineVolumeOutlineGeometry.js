define(["./when-4bbc8319","./Matrix2-265d9610","./arrayRemoveDuplicates-65de6756","./BoundingRectangle-8f2409a1","./Transforms-8b90e17c","./ComponentDatatype-aad54330","./PolylineVolumeGeometryLibrary-738776c0","./RuntimeError-5b082e8f","./GeometryAttribute-4bcb785f","./GeometryAttributes-7827a6c2","./IndexDatatype-6739e544","./PolygonPipeline-5fd67ae2","./combine-e9466e32","./WebGLConstants-508b9636","./EllipsoidTangentPlane-f1a69a20","./AxisAlignedBoundingBox-2a0ca7ef","./IntersectionTests-596e31ec","./Plane-616c9c0a","./PolylinePipeline-b9913663","./EllipsoidGeodesic-ed024f16","./EllipsoidRhumbLine-d09d563f"],(function(e,i,n,t,o,r,a,l,s,p,d,c,u,y,f,h,g,m,E,P,_){"use strict";function b(n){const t=(n=e.defaultValue(n,e.defaultValue.EMPTY_OBJECT)).polylinePositions,o=n.shapePositions;if(!e.defined(t))throw new l.DeveloperError("options.polylinePositions is required.");if(!e.defined(o))throw new l.DeveloperError("options.shapePositions is required.");this._positions=t,this._shape=o,this._ellipsoid=i.Ellipsoid.clone(e.defaultValue(n.ellipsoid,i.Ellipsoid.WGS84)),this._cornerType=e.defaultValue(n.cornerType,a.CornerType.ROUNDED),this._granularity=e.defaultValue(n.granularity,r.CesiumMath.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry";let s=1+t.length*i.Cartesian3.packedLength;s+=1+o.length*i.Cartesian2.packedLength,this.packedLength=s+i.Ellipsoid.packedLength+2}b.pack=function(n,t,o){if(!e.defined(n))throw new l.DeveloperError("value is required");if(!e.defined(t))throw new l.DeveloperError("array is required");let r;o=e.defaultValue(o,0);const a=n._positions;let s=a.length;for(t[o++]=s,r=0;r<s;++r,o+=i.Cartesian3.packedLength)i.Cartesian3.pack(a[r],t,o);const p=n._shape;for(s=p.length,t[o++]=s,r=0;r<s;++r,o+=i.Cartesian2.packedLength)i.Cartesian2.pack(p[r],t,o);return i.Ellipsoid.pack(n._ellipsoid,t,o),o+=i.Ellipsoid.packedLength,t[o++]=n._cornerType,t[o]=n._granularity,t};const k=i.Ellipsoid.clone(i.Ellipsoid.UNIT_SPHERE),D={polylinePositions:void 0,shapePositions:void 0,ellipsoid:k,height:void 0,cornerType:void 0,granularity:void 0};b.unpack=function(n,t,o){if(!e.defined(n))throw new l.DeveloperError("array is required");let r;t=e.defaultValue(t,0);let a=n[t++];const s=new Array(a);for(r=0;r<a;++r,t+=i.Cartesian3.packedLength)s[r]=i.Cartesian3.unpack(n,t);a=n[t++];const p=new Array(a);for(r=0;r<a;++r,t+=i.Cartesian2.packedLength)p[r]=i.Cartesian2.unpack(n,t);const d=i.Ellipsoid.unpack(n,t,k);t+=i.Ellipsoid.packedLength;const c=n[t++],u=n[t];return e.defined(o)?(o._positions=s,o._shape=p,o._ellipsoid=i.Ellipsoid.clone(d,o._ellipsoid),o._cornerType=c,o._granularity=u,o):(D.polylinePositions=s,D.shapePositions=p,D.cornerType=c,D.granularity=u,new b(D))};const v=new t.BoundingRectangle;return b.createGeometry=function(e){const l=e._positions,u=n.arrayRemoveDuplicates(l,i.Cartesian3.equalsEpsilon);let y=e._shape;if(y=a.PolylineVolumeGeometryLibrary.removeDuplicatesFromShape(y),u.length<2||y.length<3)return;c.PolygonPipeline.computeWindingOrder2D(y)===c.WindingOrder.CLOCKWISE&&y.reverse();const f=t.BoundingRectangle.fromPoints(y,v);return function(e,i){const n=new p.GeometryAttributes;n.position=new s.GeometryAttribute({componentDatatype:r.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:e});const t=i.length,a=n.position.values.length/3,l=e.length/3/t,c=d.IndexDatatype.createTypedArray(a,2*t*(l+1));let u,y,f=0;u=0;let h=u*t;for(y=0;y<t-1;y++)c[f++]=y+h,c[f++]=y+h+1;for(c[f++]=t-1+h,c[f++]=h,u=l-1,h=u*t,y=0;y<t-1;y++)c[f++]=y+h,c[f++]=y+h+1;for(c[f++]=t-1+h,c[f++]=h,u=0;u<l-1;u++){const e=t*u,i=e+t;for(y=0;y<t;y++)c[f++]=y+e,c[f++]=y+i}return new s.Geometry({attributes:n,indices:d.IndexDatatype.createTypedArray(a,c),boundingSphere:o.BoundingSphere.fromVertices(e),primitiveType:s.PrimitiveType.LINES})}(a.PolylineVolumeGeometryLibrary.computePositions(u,y,f,e,!1),y)},function(n,t){return e.defined(t)&&(n=b.unpack(n,t)),n._ellipsoid=i.Ellipsoid.clone(n._ellipsoid),b.createGeometry(n)}}));
//# sourceMappingURL=createPolylineVolumeOutlineGeometry.js.map
